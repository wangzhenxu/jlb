<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ZpJlInfo">

	<resultMap type="ZpJlInfo" id="zpJlInfoMap">
	        	<id  column="jl_id" property="jlId"></id>
	        	<result  column="name" property="name" />
	        	<result  column="sex" property="sex" />
	        	<result  column="job_id" property="jobId" />
	        	<result  column="emal" property="emal" />
	        	<result  column="phone" property="phone" />
	        	<result  column="identity_card" property="identityCard" />
	        	<result  column="marital_id" property="maritalId" />
	        	<result  column="salary_require_id" property="salaryRequireId" />
	        	<result  column="famous_company_update_status" property="famousCompanyUpdateStatus" />
	        	<result  column="education_id" property="educationId" />
	        	<result  column="SchoolTag" property="schoolTag" />
	        	<result  column="in_persion" property="inPersion" />
	        	<result  column="in_time" property="inTime" />
	        	<result  column="last_operator_time" property="lastOperatorTime" />
	        	<result  column="job_start_time" property="jobStartTime" />
	        	<result  column="import_status" property="importStatus" />
	        	<result  column="job_position_id" property="jobPositionId" />
	        	<result  column="job_position_level_id" property="jobPositionLevelId" />
	        	<result  column="now_address" property="nowAddress" />
	        	<result  column="top_specialty" property="topSpecialty" />
	        	<result  column="birthday" property="birthday" />
	        	<result  column="jlFilePath" property="jlFilePath" />
	        	<result  column="jlContent" property="jlContent" />
	        	<result  column="english_level_id" property="englishLevelId" />
	        	
	        	<!-- 职位列表 -->
				<collection ofType="ZpJlJobLevels" property="zpJlJobLevels">
						<id  column="t_jl_job_level_id" property="jlJobLevelId"></id>
			        	<result  column="t_jl_id" property="jlId" />
			        	<result  column="t_job_level_id" property="jobLevelId" />
				</collection>
				
	</resultMap>
	
	<!-- 查询 简历信息列表 -->
	<select id="queryZpJlInfoList" resultMap="zpJlInfoMap">
		SELECT
						 		zp_jl_info.jl_id,
			        	
						 		zp_jl_info.name,
			        	
						 		zp_jl_info.sex,
			        	
						 		zp_jl_info.job_id,
			        	
						 		zp_jl_info.emal,
			        	
						 		zp_jl_info.phone,
			        	
						 		zp_jl_info.identity_card,
			        	
						 		zp_jl_info.marital_id,
			        	
						 		zp_jl_info.salary_require_id,
			        	
						 		zp_jl_info.famous_company_update_status,
			        	
						 		zp_jl_info.education_id,
			        	
						 		zp_jl_info.SchoolTag,
			        	
						 		zp_jl_info.in_persion,
			        	
						 		zp_jl_info.in_time,
			        	
						 		zp_jl_info.last_operator_time,
			        	
						 		zp_jl_info.job_start_time,
			        	
						 		zp_jl_info.import_status,
			        	
						 		zp_jl_info.job_position_id,
			        	
						 		zp_jl_info.job_position_level_id,
			        	
						 		zp_jl_info.now_address,
			        	
						 		zp_jl_info.english_level_id,
			        	
						 		zp_jl_info.top_specialty,
						 		
						 		zp_jl_info.birthday,
						 		
						 		zp_jl_job_levels.jl_job_level_id as t_jl_job_level_id,
						 		
						 		zp_jl_job_levels.jl_id as t_jl_id,
						 		
						 		zp_jl_job_levels.job_level_id as t_job_level_id,
						 		
						 		zp_jl_expand_info.jl_file_path as jlFilePath,
						 		
						 		zp_jl_expand_info.jl_content as jlContent
		FROM
			zp_jl_info LEFT JOIN zp_jl_job_levels  ON zp_jl_info.jl_id = zp_jl_job_levels.jl_id 
			LEFT JOIN zp_jl_expand_info ON zp_jl_info.jl_id = zp_jl_expand_info.jl_id
		<where>
				<if test="qtype != null and qtype=='like'">
				</if>
				        	<if test="name != null and name !='' ">
				        		AND zp_jl_info.name=#{name} 
				        	</if>
				        	<if test="sex != null and sex !='' ">
				        		AND zp_jl_info.sex=#{sex} 
				        	</if>
				        	<if test="jobId != null and jobId !='' ">
				        		AND zp_jl_info.job_id=#{jobId} 
				        	</if>
				        	<if test="emal != null and emal !='' ">
				        		AND zp_jl_info.emal=#{emal} 
				        	</if>
				        	<if test="phone != null and phone !='' ">
				        		AND zp_jl_info.phone=#{phone} 
				        	</if>
				        	<if test="identityCard != null and identityCard !='' ">
				        		AND zp_jl_info.identity_card=#{identityCard} 
				        	</if>
				        	<if test="maritalId != null and maritalId !='' ">
				        		AND zp_jl_info.marital_id=#{maritalId} 
				        	</if>
				        	<if test="salaryRequireId != null and salaryRequireId !='' ">
				        		AND zp_jl_info.salary_require_id=#{salaryRequireId} 
				        	</if>
				        	<if test="famousCompanyUpdateStatus != null and famousCompanyUpdateStatus !='' ">
				        		AND zp_jl_info.famous_company_update_status=#{famousCompanyUpdateStatus} 
				        	</if>
				        	<if test="educationId != null and educationId !='' ">
				        		AND zp_jl_info.education_id=#{educationId} 
				        	</if>
				        	<if test="schoolTag != null and schoolTag !='' ">
				        		AND zp_jl_info.SchoolTag=#{schoolTag} 
				        	</if>
				        	<if test="inPersion != null and inPersion !='' ">
				        		AND zp_jl_info.in_persion=#{inPersion} 
				        	</if>
				        	<if test="inTime != null and inTime !='' ">
				        		AND zp_jl_info.in_time=#{inTime} 
				        	</if>
				        	<if test="lastOperatorTime != null and lastOperatorTime !='' ">
				        		AND zp_jl_info.last_operator_time=#{lastOperatorTime} 
				        	</if>
				        	<if test="jobStartTime != null and jobStartTime !='' ">
				        		AND zp_jl_info.job_start_time=#{jobStartTime} 
				        	</if>
				        	<if test="importStatus != null and importStatus !='' ">
				        		AND zp_jl_info.import_status=#{importStatus} 
				        	</if>
				        	<if test="jobPositionId != null and jobPositionId !='' ">
				        		AND zp_jl_info.job_position_id=#{jobPositionId} 
				        	</if>
				        	<if test="jobPositionLevelId != null and jobPositionLevelId !='' ">
				        		AND zp_jl_info.job_position_level_id=#{jobPositionLevelId} 
				        	</if>
				        	<if test="nowAddress != null and nowAddress !='' ">
				        		AND zp_jl_info.now_address=#{nowAddress} 
				        	</if>
				        	<if test="englishLevelId != null and englishLevelId !='' ">
				        		AND zp_jl_info.english_level_id=#{englishLevelId} 
				        	</if>
				        	<if test="topSpecialty != null and topSpecialty !='' ">
				        		AND zp_jl_info.top_specialty=#{topSpecialty} 
				        	</if>
		</where>
		ORDER BY zp_jl_info.jl_id desc 
		<if test="skipResults!=null">
				limit #{skipResults} ,#{maxResults}
		</if>
		
	</select>
	
	<!-- 查询 简历信息列表条数 -->
	<select id="getZpJlInfoListCount" resultType="int">
		SELECT
			count(1)
		FROM
			zp_jl_info
		<where>
				<if test="qtype != null and qtype=='like'">
				</if>
				<if test="qtype != null and qtype=='uniqueValidate'">
						<if test="phoneT != null and phoneT !='' and emalT != null and emalT !=''  ">
				        		AND zp_jl_info.phone=#{phoneT}  OR zp_jl_info.emal=#{emalT}
			        	</if>
			        	<if test="(phoneT == null or phoneT !='') and emalT != null and emalT !='' ">
				        		AND zp_jl_info.emal=#{emalT} 
				        	</if>
			          <if test="(phoneT != null and phoneT !='' ) and (emalT == null or emalT !='') ">
			        		AND zp_jl_info.phone=#{phoneT} 
		        	  </if>
				</if>
				        	<if test="name != null and name !=''">
				        		AND zp_jl_info.name=#{name} 
				        	</if>
				        	<if test="sex != null and sex !=''">
				        		AND zp_jl_info.sex=#{sex} 
				        	</if>
				        	<if test="jobId != null and jobId !=''">
				        		AND zp_jl_info.job_id=#{jobId} 
				        	</if>
				        	<if test="emal != null and emal !=''">
				        		AND zp_jl_info.emal=#{emal} 
				        	</if>
				        	<if test="phone != null and phone !=''">
				        		AND zp_jl_info.phone=#{phone} 
				        	</if>
				        	<if test="identityCard != null and identityCard !=''">
				        		AND zp_jl_info.identity_card=#{identityCard} 
				        	</if>
				        	<if test="maritalId != null and maritalId !=''">
				        		AND zp_jl_info.marital_id=#{maritalId} 
				        	</if>
				        	<if test="salaryRequireId != null and salaryRequireId !=''">
				        		AND zp_jl_info.salary_require_id=#{salaryRequireId} 
				        	</if>
				        	<if test="famousCompanyUpdateStatus != null and famousCompanyUpdateStatus !=''">
				        		AND zp_jl_info.famous_company_update_status=#{famousCompanyUpdateStatus} 
				        	</if>
				        	<if test="educationId != null and educationId !=''">
				        		AND zp_jl_info.education_id=#{educationId} 
				        	</if>
				        	<if test="schoolTag != null and schoolTag !=''">
				        		AND zp_jl_info.SchoolTag=#{schoolTag} 
				        	</if>
				        	<if test="inPersion != null and inPersion !=''">
				        		AND zp_jl_info.in_persion=#{inPersion} 
				        	</if>
				        	<if test="inTime != null and inTime !=''">
				        		AND zp_jl_info.in_time=#{inTime} 
				        	</if>
				        	<if test="lastOperatorTime != null and lastOperatorTime !=''">
				        		AND zp_jl_info.last_operator_time=#{lastOperatorTime} 
				        	</if>
				        	<if test="jobStartTime != null and jobStartTime !=''">
				        		AND zp_jl_info.job_start_time=#{jobStartTime} 
				        	</if>
				        	<if test="importStatus != null and importStatus !=''">
				        		AND zp_jl_info.import_status=#{importStatus} 
				        	</if>
				        	<if test="jobPositionId != null and jobPositionId !=''">
				        		AND zp_jl_info.job_position_id=#{jobPositionId} 
				        	</if>
				        	<if test="jobPositionLevelId != null and jobPositionLevelId !=''">
				        		AND zp_jl_info.job_position_level_id=#{jobPositionLevelId} 
				        	</if>
				        	<if test="nowAddress != null and nowAddress !=''">
				        		AND zp_jl_info.now_address=#{nowAddress} 
				        	</if>
				        	<if test="englishLevelId != null and englishLevelId !=''">
				        		AND zp_jl_info.english_level_id=#{englishLevelId} 
				        	</if>
				        	<if test="topSpecialty != null and topSpecialty !=''">
				        		AND zp_jl_info.top_specialty=#{topSpecialty} 
				        	</if>
		</where>
	</select>
	
	
	<!-- 添加 简历信息 -->
	<insert id="addZpJlInfo" flushCache="true" useGeneratedKeys="true" keyProperty="jlId">
		INSERT INTO zp_jl_info
		<trim prefix="(" suffix=")" suffixOverrides=",">
		        	<if test="name != null">
		        		name,
		        	</if>
		        	<if test="sex != null">
		        		sex,
		        	</if>
		        	<if test="jobId != null">
		        		job_id,
		        	</if>
		        	<if test="emal != null">
		        		emal,
		        	</if>
		        	<if test="phone != null">
		        		phone,
		        	</if>
		        	<if test="identityCard != null">
		        		identity_card,
		        	</if>
		        	<if test="maritalId != null">
		        		marital_id,
		        	</if>
		        	<if test="salaryRequireId != null">
		        		salary_require_id,
		        	</if>
		        	<if test="famousCompanyUpdateStatus != null">
		        		famous_company_update_status,
		        	</if>
		        	<if test="educationId != null">
		        		education_id,
		        	</if>
		        	<if test="schoolTag != null">
		        		SchoolTag,
		        	</if>
		        	<if test="inPersion != null">
		        		in_persion,
		        	</if>
		        	<if test="inTime != null">
		        		in_time,
		        	</if>
		        	<if test="lastOperatorTime != null">
		        		last_operator_time,
		        	</if>
		        	<if test="jobStartTime != null">
		        		job_start_time,
		        	</if>
		        	<if test="importStatus != null">
		        		import_status,
		        	</if>
		        	<if test="jobPositionId != null">
		        		job_position_id,
		        	</if>
		        	<if test="jobPositionLevelId != null">
		        		job_position_level_id,
		        	</if>
		        	<if test="nowAddress != null">
		        		now_address,
		        	</if>
		        	<if test="englishLevelId != null">
		        		english_level_id,
		        	</if>
		        	<if test="topSpecialty != null">
		        		top_specialty,
		        	</if>
		        	<if test="birthday != null">
		        		birthday,
		        	</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			        	<if test="name != null">
			        		#{name},
			        	</if>
			        	<if test="sex != null">
			        		#{sex},
			        	</if>
			        	<if test="jobId != null">
			        		#{jobId},
			        	</if>
			        	<if test="emal != null">
			        		#{emal},
			        	</if>
			        	<if test="phone != null">
			        		#{phone},
			        	</if>
			        	<if test="identityCard != null">
			        		#{identityCard},
			        	</if>
			        	<if test="maritalId != null">
			        		#{maritalId},
			        	</if>
			        	<if test="salaryRequireId != null">
			        		#{salaryRequireId},
			        	</if>
			        	<if test="famousCompanyUpdateStatus != null">
			        		#{famousCompanyUpdateStatus},
			        	</if>
			        	<if test="educationId != null">
			        		#{educationId},
			        	</if>
			        	<if test="schoolTag != null">
			        		#{schoolTag},
			        	</if>
			        	<if test="inPersion != null">
			        		#{inPersion},
			        	</if>
			        	<if test="inTime != null">
			        		#{inTime},
			        	</if>
			        	<if test="lastOperatorTime != null">
			        		#{lastOperatorTime},
			        	</if>
			        	<if test="jobStartTime != null">
			        		#{jobStartTime},
			        	</if>
			        	<if test="importStatus != null">
			        		#{importStatus},
			        	</if>
			        	<if test="jobPositionId != null">
			        		#{jobPositionId},
			        	</if>
			        	<if test="jobPositionLevelId != null">
			        		#{jobPositionLevelId},
			        	</if>
			        	<if test="nowAddress != null">
			        		#{nowAddress},
			        	</if>
			        	<if test="englishLevelId != null">
			        		#{englishLevelId},
			        	</if>
			        	<if test="topSpecialty != null">
			        		#{topSpecialty},
			        	</if>
			        	<if test="birthday != null">
			        		#{birthday},
			        	</if>
		</trim>
	</insert>
	
	<!-- 修改 简历信息 -->
	<update id="updateZpJlInfo" >
		UPDATE  zp_jl_info
		<trim prefix="set" suffixOverrides=",">
			        	<if test="name != null">
			        		name=#{name},
			        	</if>
			        	<if test="sex != null">
			        		sex=#{sex},
			        	</if>
			        	<if test="jobId != null">
			        		job_id=#{jobId},
			        	</if>
			        	<if test="emal != null">
			        		emal=#{emal},
			        	</if>
			        	<if test="phone != null">
			        		phone=#{phone},
			        	</if>
			        	<if test="identityCard != null">
			        		identity_card=#{identityCard},
			        	</if>
			        	<if test="maritalId != null">
			        		marital_id=#{maritalId},
			        	</if>
			        	<if test="salaryRequireId != null">
			        		salary_require_id=#{salaryRequireId},
			        	</if>
			        	<if test="famousCompanyUpdateStatus != null">
			        		famous_company_update_status=#{famousCompanyUpdateStatus},
			        	</if>
			        	<if test="educationId != null">
			        		education_id=#{educationId},
			        	</if>
			        	<if test="schoolTag != null">
			        		SchoolTag=#{schoolTag},
			        	</if>
			        	<if test="inPersion != null">
			        		in_persion=#{inPersion},
			        	</if>
			        	<if test="inTime != null">
			        		in_time=#{inTime},
			        	</if>
			        	<if test="lastOperatorTime != null">
			        		last_operator_time=#{lastOperatorTime},
			        	</if>
			        	<if test="jobStartTime != null">
			        		job_start_time=#{jobStartTime},
			        	</if>
			        	<if test="importStatus != null">
			        		import_status=#{importStatus},
			        	</if>
			        	<if test="jobPositionId != null">
			        		job_position_id=#{jobPositionId},
			        	</if>
			        	<if test="jobPositionLevelId != null">
			        		job_position_level_id=#{jobPositionLevelId},
			        	</if>
			        	<if test="nowAddress != null">
			        		now_address=#{nowAddress},
			        	</if>
			        	<if test="englishLevelId != null">
			        		english_level_id=#{englishLevelId},
			        	</if>
			        	<if test="topSpecialty != null">
			        		top_specialty=#{topSpecialty},
			        	</if>
		</trim>
		WHERE jl_id=#{jlId}
	</update>

	<!-- 删除  简历信息 -->
	<delete id="deleteZpJlInfo">
		DELETE FROM zp_jl_info 
		<where>
				        	<if test="jlId != null">
				        		AND jl_id=#{jlId} 
				        	</if>
				        	<if test="name != null">
				        		AND name=#{name} 
				        	</if>
				        	<if test="sex != null">
				        		AND sex=#{sex} 
				        	</if>
				        	<if test="jobId != null">
				        		AND job_id=#{jobId} 
				        	</if>
				        	<if test="emal != null">
				        		AND emal=#{emal} 
				        	</if>
				        	<if test="phone != null">
				        		AND phone=#{phone} 
				        	</if>
				        	<if test="identityCard != null">
				        		AND identity_card=#{identityCard} 
				        	</if>
				        	<if test="maritalId != null">
				        		AND marital_id=#{maritalId} 
				        	</if>
				        	<if test="salaryRequireId != null">
				        		AND salary_require_id=#{salaryRequireId} 
				        	</if>
				        	<if test="famousCompanyUpdateStatus != null">
				        		AND famous_company_update_status=#{famousCompanyUpdateStatus} 
				        	</if>
				        	<if test="educationId != null">
				        		AND education_id=#{educationId} 
				        	</if>
				        	<if test="schoolTag != null">
				        		AND SchoolTag=#{schoolTag} 
				        	</if>
				        	<if test="inPersion != null">
				        		AND in_persion=#{inPersion} 
				        	</if>
				        	<if test="inTime != null">
				        		AND in_time=#{inTime} 
				        	</if>
				        	<if test="lastOperatorTime != null">
				        		AND last_operator_time=#{lastOperatorTime} 
				        	</if>
				        	<if test="jobStartTime != null">
				        		AND job_start_time=#{jobStartTime} 
				        	</if>
				        	<if test="importStatus != null">
				        		AND import_status=#{importStatus} 
				        	</if>
				        	<if test="jobPositionId != null">
				        		AND job_position_id=#{jobPositionId} 
				        	</if>
				        	<if test="jobPositionLevelId != null">
				        		AND job_position_level_id=#{jobPositionLevelId} 
				        	</if>
				        	<if test="nowAddress != null">
				        		AND now_address=#{nowAddress} 
				        	</if>
				        	<if test="englishLevelId != null">
				        		AND english_level_id=#{englishLevelId} 
				        	</if>
				        	<if test="topSpecialty != null">
				        		AND top_specialty=#{topSpecialty} 
				        	</if>
		</where>
	</delete>
	
	<!-- 获得  简历信息 -->
	<select id="getZpJlInfoById" resultMap="zpJlInfoMap">
		SELECT
						 		zp_jl_info.jl_id,
						 		zp_jl_info.name,
						 		zp_jl_info.sex,
						 		zp_jl_info.job_id,
						 		zp_jl_info.emal,
						 		zp_jl_info.phone,
						 		zp_jl_info.identity_card,
						 		zp_jl_info.marital_id,
						 		zp_jl_info.salary_require_id,
						 		zp_jl_info.famous_company_update_status,
						 		zp_jl_info.education_id,
						 		zp_jl_info.SchoolTag,
						 		zp_jl_info.in_persion,
						 		zp_jl_info.in_time,
						 		zp_jl_info.last_operator_time,
						 		zp_jl_info.job_start_time,
						 		zp_jl_info.import_status,
						 		zp_jl_info.job_position_id,
						 		zp_jl_info.job_position_level_id,
						 		zp_jl_info.now_address,
						 		zp_jl_info.english_level_id,
						 		zp_jl_info.top_specialty,
						 		zp_jl_info.birthday,
						 		zp_jl_job_levels.jl_job_level_id as t_jl_job_level_id,
						 		zp_jl_job_levels.jl_id as t_jl_id,
						 		zp_jl_job_levels.job_level_id as t_job_level_id,
						 		zp_jl_expand_info.jl_file_path as jlFilePath,
						 		zp_jl_expand_info.jl_content as jlContent
		FROM
			zp_jl_info LEFT JOIN zp_jl_job_levels  ON zp_jl_info.jl_id = zp_jl_job_levels.jl_id 
			LEFT JOIN zp_jl_expand_info ON zp_jl_info.jl_id = zp_jl_expand_info.jl_id
		WHERE 
		zp_jl_info.jl_id=#{jlId}
		
	</select>

</mapper>