<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="MpRuleKw">
	<select id="getMpRuleKw" parameterType="long" resultType="MpRuleKw">
		select mrk_id as mrkId, mr_id as mrId,mc_id as mcId,match_way as matchWay ,keyword as keyWord from mp_rule_kw where id=#{mrk_id}
	</select>
	<select id="getMpRuleKwsSearch" parameterType="String" resultType="MpRuleKw">
		select mrk_id as mrkId, mr_id as mrId,mc_id as mcId,match_way as matchWay ,keyword as keyWord from mp_rule_kw where keyword like '%${keyword}%'
	</select>
	<insert id="insertMpRuleKw" parameterType="MpRuleKw">
	    insert into mp_rule_kw(mp_rule_kw.keyword,mp_rule_kw.match_way,mp_rule_kw.mr_id) 
	    	values(#{keyword},#{matchWay},#{mrId})
	    <selectKey keyProperty="mrkId" resultType="int" order="AFTER">
			select LAST_INSERT_ID() 
		</selectKey> 
	</insert>
	<delete id="delMpRuleKwByid" parameterType="long">
	    delete from mp_rule_kw where mrk_id=#{id}
	</delete>
	<delete id="delMpRuleKwBymr_id" parameterType="long">
	    delete from mp_rule_kw where mr_id=#{id}
	</delete>
	
	<update id="updateMpRuleKw" parameterType="MpRuleKw">
	    update mp_rule_kw set mp_rule_kw.match_way=#{matchWay},mp_rule_kw.keyword=#{keyword}
	    where mp_rule_kw.mrk_id=#{mrkId}
	</update>
	<select id="getMpRuleKwListBymr_id" parameterType="long" resultType="MpRuleKw">
		select mrk_id as mrkId, mr_id as mrId,mc_id as mcId,match_way as matchWay ,keyword as keyWord from mp_rule_kw where mr_id=#{mr_id} order by mrk_id desc
	</select>
</mapper>